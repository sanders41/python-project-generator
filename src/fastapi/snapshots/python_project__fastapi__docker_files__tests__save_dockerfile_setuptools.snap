---
source: src/fastapi/docker_files.rs
expression: content
---
"# syntax=docker/dockerfile:1\n\nFROM ubuntu:24.04 AS builder\n\nWORKDIR /app\n\nENV \\\n  PYTHONUNBUFFERED=true \\\n  PATH=\"/root/.local/bin:$PATH\"\n\nRUN : \\\n  && apt-get update \\\n  && apt-get install -y --no-install-recommends \\\n  software-properties-common \\\n  && add-apt-repository ppa:deadsnakes/ppa \\\n  && apt-get update \\\n  && apt-get install -y --no-install-recommends \\\n  python3.11 \\\n  python3.11-venv \\\n  && apt-get clean \\\n  && rm -rf /var/lib/apt/lists/*\n\nCOPY . ./\n\nRUN : \\\n  && python3.11 -m venv .venv \\\n  && .venv/bin/python -m pip install -r requirements.txt\n\n\n# Build production stage\nFROM ubuntu:24.04 AS prod\n\nENV \\\n  PYTHONUNBUFFERED=true \\\n  PATH=\"/app/.venv/bin:$PATH\" \\\n  PORT=\"8000\"\n\nRUN : \\\n  && apt-get update \\\n  && apt-get install -y --no-install-recommends \\\n  software-properties-common \\\n  && add-apt-repository ppa:deadsnakes/ppa \\\n  && apt-get update \\\n  && apt-get install -y --no-install-recommends \\\n  python3.13 \\\n  && apt-get clean \\\n  && rm -rf /var/lib/apt/lists/*\n\nRUN useradd appuser\n\nWORKDIR /app\n\nRUN chown appuser:appuser /app\n\nCOPY --from=builder /app/.venv /app/.venv\nCOPY --from=builder /app/my_project /app/my_project\nCOPY ./scripts/entrypoint.sh /app\n\nRUN chmod +x /app/entrypoint.sh\n\nEXPOSE 8000\n\nUSER appuser\n\nENTRYPOINT [\"./entrypoint.sh\"]\n"
